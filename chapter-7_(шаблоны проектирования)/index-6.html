<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Шаблоны проектирования</title>
</head>

<body>
  <script>
    /*
      Итератор
      Шаблон итератора применяется, когда имеется объект, содержащий совокупность данных. Эти данные могут храниться в виде сложной
      структуры, а вам необходимо обеспечить удобный доступ к каждому элементу этой структуры.
    */

    var agg = (function () {
      var index = 0,
        data = [1, 2, 3, 4, 5],
        length = data.length;

      return {
        next: function () {
          var element;
          if (!this.hasNext()) {
            return null;
          }
          element = data[index];
          index = index + 2;
          return element;
        },

        hasNext: function () {
          return index < length;
        },

        rewind: function () {
          index = 0;
        },

        current: function () {
          return data[index];
        }
      };
    }());

    // проверка
    while (agg.hasNext()) {
      console.log(agg.next()); // 1, 3, 5
    }

    // возврат
    agg.rewind();
    console.log(agg.current()); // 1
  </script>
</body>

</html>